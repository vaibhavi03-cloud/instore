<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Mall Navigator ‚Äî Multi-Floor</title>
<style>
  body {
    margin: 0;
    font-family: "Poppins", sans-serif;
    background: linear-gradient(135deg, #dceeff, #ffffff);
  }

  header {
    background: #002b5b;
    color: white;
    text-align: center;
    padding: 15px 0;
    font-size: 26px;
    font-weight: 600;
    letter-spacing: 1px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  }

  #controls {
    text-align: center;
    margin: 20px;
  }

  select, input, button {
    padding: 10px 15px;
    border-radius: 25px;
    border: 1px solid #007bff;
    margin: 5px;
    font-size: 15px;
    outline: none;
  }

  button {
    background-color: #007bff;
    color: white;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.3s;
  }

  button:hover { background: #0056b3; }

  svg {
    display: block;
    margin: 20px auto;
    background: #f7faff;
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
  }

  .store {
    fill: #ffffff;
    stroke: #007bff;
    stroke-width: 2;
    rx: 10;
    ry: 10;
    transition: all 0.3s ease;
  }

  .store:hover { fill: #cce3ff; transform: scale(1.05); }

  text {
    font-size: 12px;
    text-anchor: middle;
    alignment-baseline: middle;
    pointer-events: none;
  }

  .facility { fill: #fff4a3; stroke: #ffcc00; }
  .path-line {
    stroke: #ff4747;
    stroke-width: 3;
    stroke-dasharray: 10;
    animation: dash 1s linear infinite;
  }
  @keyframes dash { to { stroke-dashoffset: -20; } }

  .dot { fill: #00ff80; }
</style>
</head>
<body>
<header>üè¨ Smart Mall Navigator ‚Äî Multi-Floor System</header>

<div id="controls">
  <label for="floorSelect">Select Floor:</label>
  <select id="floorSelect" onchange="loadFloor()">
    <option value="Ground Floor">Ground Floor üè¢</option>
    <option value="1st Floor">1st Floor üëó</option>
    <option value="2nd Floor">2nd Floor üé¨</option>
  </select>

  <input type="text" id="searchInput" placeholder="Search store or restaurant..." />
  <button onclick="navigate()">Find Route</button>
</div>

<svg id="mall" width="1000" height="600"></svg>

<script>
const floors = {
  "Ground Floor": [
    { name: "ENTRANCE", x: 60, y: 520 },
    { name: "APPLE STORE", x: 150, y: 120 },
    { name: "SAMSUNG", x: 300, y: 120 },
    { name: "SONY", x: 450, y: 120 },
    { name: "CROMA", x: 600, y: 120 },
    { name: "ATM", x: 850, y: 130 },
    { name: "LIFT", x: 850, y: 250 },
    { name: "WASHROOM", x: 850, y: 380 },
    { name: "SECURITY", x: 80, y: 250 }
  ],

  "1st Floor": [
    { name: "ZARA", x: 100, y: 120 },
    { name: "H&M", x: 250, y: 120 },
    { name: "PUMA", x: 400, y: 120 },
    { name: "NIKE", x: 550, y: 120 },
    { name: "ADIDAS", x: 700, y: 120 },
    { name: "FOOD COURT", x: 100, y: 400 },
    { name: "STARBUCKS", x: 300, y: 400 },
    { name: "KFC", x: 500, y: 400 },
    { name: "TRIAL ROOM", x: 850, y: 250 },
    { name: "LIFT", x: 850, y: 400 }
  ],

  "2nd Floor": [
    { name: "CINEMAX", x: 120, y: 120 },
    { name: "FUNZONE", x: 300, y: 120 },
    { name: "BOOK STORE", x: 480, y: 120 },
    { name: "TOY WORLD", x: 660, y: 120 },
    { name: "GAMING ARENA", x: 840, y: 120 },
    { name: "ICE CREAM PARLOR", x: 200, y: 400 },
    { name: "PIZZA HUT", x: 400, y: 400 },
    { name: "DOMINO‚ÄôS", x: 600, y: 400 },
    { name: "WASHROOM", x: 850, y: 300 },
    { name: "LIFT", x: 850, y: 450 }
  ]
};

const svg = document.getElementById("mall");
let currentFloor = "Ground Floor";
let currentX = 60;
let currentY = 550;

function drawFloor(floorData) {
  svg.innerHTML = ""; // Clear previous floor
  floorData.forEach(store => {
    const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
    rect.setAttribute("x", store.x);
    rect.setAttribute("y", store.y);
    rect.setAttribute("width", 100);
    rect.setAttribute("height", 60);
    rect.setAttribute("class", "store");
    svg.appendChild(rect);

    const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
    text.setAttribute("x", store.x + 50);
    text.setAttribute("y", store.y + 35);
    text.textContent = store.name;
    svg.appendChild(text);
  });

  // Current location dot
  const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
  dot.setAttribute("cx", currentX);
  dot.setAttribute("cy", currentY);
  dot.setAttribute("r", 8);
  dot.setAttribute("fill", "#00ff80");
  svg.appendChild(dot);
}

function loadFloor() {
  currentFloor = document.getElementById("floorSelect").value;
  drawFloor(floors[currentFloor]);
}

function drawPath(x1, y1, x2, y2) {
  document.querySelectorAll(".path-line").forEach(p => p.remove());
  document.querySelectorAll(".dot-move").forEach(p => p.remove());

  const path = document.createElementNS("http://www.w3.org/2000/svg", "line");
  path.setAttribute("x1", x1);
  path.setAttribute("y1", y1);
  path.setAttribute("x2", x2);
  path.setAttribute("y2", y2);
  path.setAttribute("class", "path-line");
  svg.appendChild(path);

  // moving dot animation
  const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
  dot.setAttribute("r", 8);
  dot.setAttribute("class", "dot dot-move");
  svg.appendChild(dot);

  let progress = 0;
  function animate() {
    progress += 0.01;
    if (progress <= 1) {
      const cx = x1 + (x2 - x1) * progress;
      const cy = y1 + (y2 - y1) * progress;
      dot.setAttribute("cx", cx);
      dot.setAttribute("cy", cy);
      requestAnimationFrame(animate);
    }
  }
  animate();
}

function navigate() {
  const query = document.getElementById("searchInput").value.toUpperCase();
  const floorData = floors[currentFloor];
  const dest = floorData.find(s => s.name === query);
  if (dest) {
    drawPath(currentX, currentY, dest.x + 50, dest.y + 30);
    alert(`Navigating to ${dest.name} on ${currentFloor} üè¨`);
  } else {
    alert("Store not found on this floor!");
  }
}

loadFloor();
</script>
</body>
</html>
